<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Marry ‚Ä¢ Invito</title>
  <meta name="theme-color" content="#0E7EA6" />

  <!-- FONT -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Manrope:wght@500;600;700;800&display=swap" rel="stylesheet">

  <!-- ‚úÖ CSS CRITICO INLINE: la busta si vede SEMPRE anche se styles.css non carica -->
  <style>
    :root{ --teal:#0E7EA6; --powder:#1A87B5; --shadow:0 22px 70px rgba(10,20,36,.18); }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{ margin:0; font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,Arial; overflow:hidden; background:#EAF6FF; }

    .bg{ position:fixed; inset:0; z-index:-3;
      background: radial-gradient(900px 520px at 20% 10%, rgba(127,189,235,.98), rgba(127,189,235,.10) 60%),
                  radial-gradient(800px 520px at 82% 20%, rgba(207,239,255,.98), rgba(207,239,255,.08) 62%),
                  radial-gradient(1000px 700px at 40% 92%, rgba(74,163,224,.50), rgba(74,163,224,0) 60%),
                  linear-gradient(180deg, #EAF6FF, #D8F0FF 55%, #EAF6FF);
    }
    .grain{ position:fixed; inset:0; z-index:-2; pointer-events:none; opacity:.10;
      background-image: radial-gradient(rgba(0,0,0,.10) 1px, transparent 1px);
      background-size: 3px 3px; mix-blend-mode: overlay;
    }

    .screen{ min-height:100svh; display:grid; place-items:center; padding:18px 14px; }
    .openHint{
      position:absolute; top:14px; z-index:50;
      border:0; cursor:pointer; font-weight:900; letter-spacing:.02em;
      padding:10px 14px; border-radius:999px;
      background:rgba(255,255,255,.75); border:1px solid rgba(255,255,255,.92);
      box-shadow:0 16px 40px rgba(10,20,36,.10); color:var(--powder);
    }

    .stageStack{
      width:min(92vw,520px);
      height:min(70vh,560px); /* ‚úÖ altezza reale -> non collassa mai */
      position:relative;
    }

    .envelopeRef{
      position:absolute; inset:0;
      border-radius:18px;
      background:var(--teal);
      box-shadow:var(--shadow);
      border:3px solid rgba(255,255,255,.40);
      overflow:hidden;
    }
    .envTextTop{
      position:absolute; top:18%; left:0; right:0; z-index:5;
      text-align:center; font-weight:900; color:rgba(255,255,255,.92);
      text-shadow:0 10px 22px rgba(0,0,0,.18);
    }
    .envSeam{
      position:absolute; top:0; bottom:0; left:50%; width:3px; transform:translateX(-50%);
      background:rgba(0,0,0,.28); box-shadow:0 0 0 1px rgba(255,255,255,.08);
      z-index:2;
    }
    .envSeal{ position:absolute; left:50%; top:45%; transform:translate(-50%,-50%); z-index:6; }
    .sealDisk{
      width:86px; height:86px; border-radius:999px;
      background:rgba(255,255,255,.92); border:1px solid rgba(255,255,255,.95);
      box-shadow:0 18px 38px rgba(10,20,36,.20);
      display:grid; place-items:center;
    }
    .sealMono{ font-family:"Pristina","Allura",cursive; font-size:34px; color:var(--powder); }
    .heart{ color:#2a8fca; }

    .envFlap{
      position:absolute; left:0; right:0; top:0; height:56%;
      background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.05));
      clip-path:polygon(0 0, 100% 0, 50% 72%);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .9s cubic-bezier(.2,.9,.2,1);
      z-index:4;
    }
    .envDoor{ position:absolute; top:0; bottom:0; width:50%; background:rgba(255,255,255,.06);
      transition: transform .85s cubic-bezier(.2,.9,.2,1); z-index:3;
    }
    .envDoorL{ left:0; border-right:1px solid rgba(0,0,0,.20); }
    .envDoorR{ right:0; border-left:1px solid rgba(0,0,0,.20); }

    .envelopeRef.is-open .envFlap{ transform: rotateX(165deg); }
    .envelopeRef.is-open .envDoorL{ transform: translateX(-12%); }
    .envelopeRef.is-open .envDoorR{ transform: translateX(12%); }
    .envelopeRef.is-open .envSeal{ opacity:.15; transform:translate(-50%,-50%) scale(.9); transition:.5s ease; }

    /* letter */
    .paperCard{
      position:absolute; inset:0;
      border-radius:18px;
      background:rgba(255,255,255,.94);
      box-shadow:var(--shadow);
      border:3px solid rgba(255,255,255,.40);
      overflow:hidden;
      opacity:0; transform: translateY(18px) scale(.98);
      pointer-events:none;
      transition: opacity .55s ease, transform .55s ease;
    }
    body.opened .paperCard{ opacity:1; transform:translateY(0) scale(1); pointer-events:auto; }

    .paperInner{ position:absolute; inset:0; display:grid; place-items:center; padding:18px; text-align:center; }
    .scriptName{ font-family:"Pristina","Allura",cursive; font-size:54px; color:var(--powder); line-height:1.05; }
    .scriptAnd{ font-family:"Pristina","Allura",cursive; font-size:40px; color:rgba(26,135,181,.85); margin:6px 0; }

    /* SNAP pages locked until opened */
    .snap{ height:100svh; overflow-y:hidden; scroll-snap-type:y mandatory; }
    body.opened .snap{ overflow-y:auto; }
    .snap .screen{ scroll-snap-align:start; }
  </style>

  <!-- ‚úÖ Cache-busting: cambia questa versione se vuoi forzare refresh -->
  <link rel="stylesheet" href="./styles.css?v=20260221-2" />
</head>

<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- STAGE -->
  <section class="screen" id="stage">
    <button class="openHint" id="openHint" type="button">Tocca la busta per aprire ‚ú®</button>

    <div class="stageStack">
      <div class="envelopeRef" id="envelope" role="button" tabindex="0" aria-label="Apri busta">
        <div class="envTextTop" id="envTopText">Scorri verso il basso</div>
        <div class="envSeam" aria-hidden="true"></div>
        <div class="envSeal" aria-hidden="true">
          <div class="sealDisk"><div class="sealMono">V<span class="heart">‚ô•</span>M</div></div>
        </div>
        <div class="envFlap" aria-hidden="true"></div>
        <div class="envDoor envDoorL" aria-hidden="true"></div>
        <div class="envDoor envDoorR" aria-hidden="true"></div>
      </div>

      <div class="paperCard" id="paper" aria-label="Lettera">
        <div class="paperInner">
          <div>
            <div class="scriptName">Vincenzo</div>
            <div class="scriptAnd">&amp;</div>
            <div class="scriptName">Maria Giovanna</div>
          </div>

          <div style="margin-top:12px;">
            <button class="openHint" id="startScroll" type="button" style="position:static;">Scorri ‚Üì</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTENUTO (sbloccato dopo apertura) -->
  <main class="snap" id="snap" tabindex="-1">
    <section class="screen" id="invite">
      <div class="card">
        <h2 style="font-family:Fraunces,serif;margin:0;color:#1A87B5;">Vincenzo &amp; Maria Giovanna</h2>
        <p style="margin:10px 0 0;font-weight:800;color:#1A87B5;">Cerimonia 10:30 ‚Ä¢ Ristorante 14:00</p>
        <p style="margin:10px 0 0;font-weight:700;color:#1A87B5;">Scorri per le altre pagine.</p>
      </div>
    </section>

    <section class="screen" id="gift"><div class="card"><h3>üéÅ Regalo</h3><a href="PASTE_GIFT_LINK_HERE" target="_blank" rel="noopener">Apri link</a></div></section>
    <section class="screen" id="photos"><div class="card"><h3>üì∏ Foto</h3><a href="PASTE_PHOTO_LINK_HERE" target="_blank" rel="noopener">Carica foto</a></div></section>
    <section class="screen" id="thanks"><div class="card"><h3>ü§ç Grazie</h3><p>Conferma entro il <strong>31 maggio</strong>.</p></div></section>
  </main>

  <script src="./app.js?v=20260221-2"></script>
</body>
</html>
