:root{
  --ink:#10233A;
  --powder:#2E5FA7;
  --dusty:#6f8fa8;      /* celeste polvere */
  --dusty2:#BFD2F5;
  --paper: rgba(255,255,255,.94);
  --shadow: 0 26px 70px rgba(0,0,0,.22);
  --shadow2: 0 16px 44px rgba(0,0,0,.14);
  --r: 24px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:"Cormorant Garamond",serif;font-weight:500;color:var(--ink);background:#0f355a;overflow:hidden}

.hero{
  position:relative;
  height:100vh;
  background-image:url("sfondo-wedding.png");
  background-size:cover;
  background-repeat:no-repeat;
  background-position:center 30%;
}
.heroShade{position:absolute;inset:0;background:radial-gradient(900px 560px at 50% 28%, rgba(255,255,255,.05), rgba(255,255,255,0) 62%),linear-gradient(180deg, rgba(15,53,90,.10), rgba(15,53,90,.22) 60%, rgba(15,53,90,.34));pointer-events:none;}

/* Hit area sopra il sigillo stampato nell'immagine */
.sealHit{
  position:absolute;
  left:50%;
  top: 18.5%;
  transform:translate(-50%,-50%);
  width: 320px;
  height: 320px;
  border:0;
  background: transparent;
  cursor:pointer;
  z-index:3;
}
@media(max-width:420px){
  .sealHit{width:260px;height:260px;top:18.5%;}
}

/* === UPGRADE #1: FX sigillo (crepa + highlight) === */
.sealFX{
  position:absolute;
  left:50%;
  top: 18.5%;
  transform:translate(-50%,-50%);
  width: 320px;
  height: 320px;
  pointer-events:none;
  z-index:2;
  opacity:0;
}
@media(max-width:420px){
  .sealFX{width:260px;height:260px;top:18.5%;}
}

/* crepa sottile */
.sealFX::before{
  content:"";
  position:absolute;
  inset: 18%;
  border-radius:50%;
  background:
    radial-gradient(2px 60px at 52% 46%, rgba(120,140,160,.60), transparent 60%),
    radial-gradient(2px 46px at 44% 58%, rgba(120,140,160,.45), transparent 60%),
    radial-gradient(46px 2px at 58% 54%, rgba(255,255,255,.35), transparent 62%);
  opacity:0;
  transform: scale(.96) rotate(-6deg);
}

/* highlight che scorre */
.sealFX::after{
  content:"";
  position:absolute;
  inset: 8%;
  border-radius:50%;
  background: linear-gradient(130deg, transparent 0 35%, rgba(255,255,255,.65) 45%, transparent 55% 100%);
  opacity:0;
  filter: blur(0.5px);
  transform: translateX(-30%) rotate(12deg);
}

/* micro-press */
body.press .sealFX{opacity:1;}
body.press .sealFX::after{opacity:.35; animation: sweep .35s ease forwards;}

/* apertura: crepa + highlight */
body.opening .sealFX{opacity:1;}
body.opening .sealFX::before{opacity:1; animation: crackIn .45s ease forwards;}
body.opening .sealFX::after{opacity:.50; animation: sweep .55s ease forwards;}

@keyframes sweep{
  0%{transform: translateX(-40%) rotate(12deg);}
  100%{transform: translateX(40%) rotate(12deg);}
}
@keyframes crackIn{
  0%{opacity:0; transform: scale(.92) rotate(-6deg);}
  100%{opacity:1; transform: scale(1) rotate(-6deg);}
}

.hint{position:absolute;bottom:calc(18px + env(safe-area-inset-bottom));left:50%;transform:translateX(-50%);padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.74);border:1px solid rgba(255,255,255,.82);box-shadow:0 12px 26px rgba(0,0,0,.14);backdrop-filter:blur(10px);font-weight:700;letter-spacing:.02em;color:rgba(16,35,58,.82);transition:opacity .25s ease, transform .25s ease;z-index:4;}
body.opening .hint{opacity:0;transform:translateX(-50%) translateY(10px)}

/* Overlay */
.overlay{position:fixed;inset:0;display:grid;place-items:center;padding:18px 14px calc(18px + env(safe-area-inset-bottom));background:rgba(255,255,255,.10);backdrop-filter:blur(12px);opacity:0;pointer-events:none;transition:opacity .25s ease;}

/* Busta */
.envelope{position:absolute;left:50%;top:58%;transform:translate(-50%,-50%);width:min(92vw,640px);height:min(70vh,520px);pointer-events:none;opacity:0;}
.envBack{position:absolute;inset:0;border-radius:26px;background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.18);box-shadow:0 22px 60px rgba(0,0,0,.22);}
.envFront{position:absolute;inset:0;border-radius:26px;background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.26));border:1px solid rgba(255,255,255,.18);clip-path:polygon(0 58%, 50% 92%, 100% 58%, 100% 100%, 0 100%);}
.flap{position:absolute;left:0;right:0;top:0;height:54%;border-radius:26px 26px 0 0;background:linear-gradient(180deg, rgba(191,210,245,.55), rgba(255,255,255,.18));transform-origin:50% 0%;transform:rotateX(0deg);}

/* Lettera */
.letter{width:min(92vw,640px);max-height:min(78vh,640px);overflow:auto;background:var(--paper);
  border:1px solid rgba(191,210,245,.35); /* UPGRADE #2: dusty border */
  border-radius:var(--r);box-shadow:var(--shadow);padding:28px 18px 20px;text-align:center;position:relative;opacity:0;transform:translateY(180px) scale(.96);transform-origin:50% 0%;}
.letter::before{content:"";position:absolute;top:-14px;left:16px;right:16px;height:16px;border-radius:12px;background:rgba(191,210,245,.35);box-shadow:0 10px 20px rgba(0,0,0,.14);opacity:.9;}
.close{position:absolute;top:10px;right:10px;width:36px;height:36px;border-radius:999px;border:1px solid rgba(16,35,58,.12);background:rgba(255,255,255,.78);cursor:pointer;font-family:Inter,system-ui,sans-serif;}

.letterTop{opacity:0;transform:translateY(10px);} 
.names{font-family:'Great Vibes',cursive;font-size:48px;line-height:1.02;margin:2px 0 10px;color:rgba(16,35,58,.92)}
.amp{font-family:Cinzel,serif;font-size:18px;margin:0 6px;color:rgba(46,95,167,.80)}
.kicker{font-family:Cinzel,serif;text-transform:uppercase;letter-spacing:.20em;font-size:12px;margin:0 0 8px;color:rgba(111,143,168,.92)}
.dateLine{font-weight:600;font-size:18px;color:rgba(16,35,58,.72);margin-bottom:6px}

.letterBody{opacity:0;transform:translateY(10px);} 
.grid{display:grid;gap:10px;margin-top:10px}
@media(min-width:680px){.grid{grid-template-columns:1fr 1fr;}}
.box{background:rgba(255,255,255,.88);border:1px solid rgba(46,95,167,.10);border-radius:16px;padding:12px;box-shadow:0 10px 22px rgba(0,0,0,.07)}
.box h2{margin:0 0 6px;font-family:Cinzel,serif;letter-spacing:.18em;font-size:11px;text-transform:uppercase;color:rgba(46,95,167,.82)}
.box p{margin:0;font-size:18px;color:rgba(16,35,58,.78)}
.box span{opacity:.75}

.btn{display:inline-block;margin-top:10px;padding:10px 12px;border-radius:12px;text-decoration:none;background:rgba(234,242,255,.95);border:1px solid rgba(46,95,167,.18);color:rgba(16,35,58,.88);font-weight:800;font-family:Inter,system-ui,sans-serif;transition:transform .15s ease, background .15s ease;}
.btn:active{transform:scale(.99)}

/* === UPGRADE #3: RSVP SI/NO === */
.rsvp{margin-top:14px}
.rsvpTitle{margin:0;font-family:Cinzel,serif;letter-spacing:.14em;text-transform:uppercase;font-size:11px;color:rgba(111,143,168,.92)}
.rsvpRow{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:10px}
.btnYes,.btnNo{display:inline-block;padding:12px 16px;border-radius:999px;text-decoration:none;font-family:Cinzel,serif;letter-spacing:.06em;font-weight:800;box-shadow:0 14px 28px rgba(0,0,0,.10);}
.btnYes{background:rgba(46,95,167,.96);color:#fff;}
.btnNo{background:rgba(255,255,255,.92);color:rgba(46,95,167,.92);border:1px solid rgba(111,143,168,.45);}
.btnYes:active,.btnNo:active{transform:scale(.99)}
.rsvpNote{margin:10px 0 0;font-size:18px;color:rgba(16,35,58,.72)}

.thanks{margin-top:16px;opacity:.72;font-size:18px}

/* OPEN state */
body.open .overlay{opacity:1;pointer-events:auto}
body.open .envelope{opacity:1}
body.open .flap{animation: flapOpen .65s cubic-bezier(.2,.9,.2,1) forwards;}
@keyframes flapOpen{to{transform:rotateX(180deg);}}
body.open .letter{animation: letterOut .85s cubic-bezier(.15,0.95,.18,1) forwards;}
@keyframes letterOut{0%{opacity:0;transform:translateY(210px) scale(.96);}55%{opacity:1;transform:translateY(-10px) scale(1.01);}100%{opacity:1;transform:translateY(0) scale(1);}}
body.open .letterTop{animation: fadeUp .55s ease forwards;animation-delay:.35s;}
body.open .letterBody{animation: fadeUp .55s ease forwards;animation-delay:.70s;}
@keyframes fadeUp{to{opacity:1;transform:translateY(0);}}

@media(max-width:420px){
  .names{font-size:42px}
  .letter{padding:26px 16px 18px}
  .box p,.rsvpNote,.thanks{font-size:17px}
}

@media (prefers-reduced-motion: reduce){
  *{transition:none !important;animation:none !important}
  body.open .overlay{opacity:1;pointer-events:auto}
  body.open .letter{opacity:1;transform:none}
  body.open .letterTop, body.open .letterBody{opacity:1;transform:none}
}
